<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{master.html}">
<head>
    <meta charset="UTF-8">
    <title>Listado de Tipos de Producto</title>
</head>
<body>
<div class="container" layout:fragment="content">
    <h1>Listado de Tipos de Producto Activos</h1>

    <a th:href="@{/admin/tproducto/nuevo}" class="btn btn-primary">Nuevo Tipo</a>
    <a th:href="@{/admin/tproducto/habilitar}" class="btn btn-secondary">Ver Desactivados</a>

    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Id</th>
            <th>Nombre</th>
            <th>Categoría</th> <th>Estado</th>
            <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="tpro : ${tiposProducto} ">
            <td th:text="${tpro.id}"></td>
            <td th:text="${tpro.nombre}"></td>
            <td th:text="${tpro.idCate.nombre}"></td> <td th:text="${tpro.estado? 'Habilitado': 'Deshabilitado'}"></td>
            <td>
                <a th:href="@{/admin/tproducto/editar/{id}(id=${tpro.id})}" title="Editar Tipo de Producto" class="btn btn-primary btn-sm">
                    <i class="fa fa-edit"></i>
                </a>

                <a href="#" title="Desactivar Tipo de Producto" onclick="return confirmarDesactivar(this)" class="btn btn-danger btn-sm">
                    <i class="fa fa-trash"></i>
                </a>

                <form th:action="@{/admin/tproducto/eliminar/{id}(id=${tpro.id})}" method="get" class="d-none"></form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div layout:fragment="scripts">
    <script>
        function confirmarDesactivar(etiqueta)
        {
            var ok = confirm('¿Estás seguro de DESACTIVAR este Tipo de Producto?');

            if(ok)
            {
                etiqueta.nextElementSibling.submit();
            }
            return false;
        }
    </script>
</div>
</body>
</html>